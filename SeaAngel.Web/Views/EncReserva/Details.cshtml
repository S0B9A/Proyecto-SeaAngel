@model SeaAngel.Application.DTOs.EncReservaDTO

@{
    ViewData["Title"] = "Factura";
}

<div class="container my-5">
    <div class="invoice border rounded p-4 bg-white shadow-lg">
        <!-- Encabezado -->
        <div class="text-center mb-4">
            <h2 class="fw-bold text-uppercase text-primary">Factura</h2>
            <p class="text-muted">Gracias por su compra</p>
        </div>

        <!-- Información del usuario -->
        <div class="row mb-4">
            <div class="col-md-6">
                <h5 class="fw-bold text-secondary">Datos del Cliente</h5>
                <p><strong>Nombre:</strong> @Model.IdusuarioNavigation.Nombre</p>
                <p><strong>Teléfono:</strong> @Model.IdusuarioNavigation.Telefono</p>
                <p><strong>Correo:</strong> @Model.IdusuarioNavigation.CorreoElectronico</p>
            </div>
            <div class="col-md-6 text-md-end">
                <h5 class="fw-bold text-secondary">Detalles de la Factura</h5>
                <p><strong>#Reserva:</strong> @Model.Id</p>
                <p><strong>Fecha de Creación:</strong> @(Model.FechaCreacion?.ToString("dd/MM/yyyy") ?? "N/A")</p>

                <!-- Estado de Pago -->
                @if (Model.Estado == "Pendiente")
                {
                    <div class="alert alert-warning text-center mt-3">
                        <p class="mb-1"><strong>Estado de Pago:</strong> Pendiente</p>
                        <p class="mb-1"><strong>Fecha limite de Pago:</strong> @(Model.FechaPago.HasValue ? Model.FechaPago.Value.ToString("dd/MM/yyyy") : "N/A")</p>
                        <p class="mb-0"><strong>Total a Pagar:</strong> $@Model.PrecioTotal</p>
                    </div>
                }else{
                    <p><strong>Estado de Pago:</strong> <span class="badge bg-success">@Model.Estado</span></p>
                }
            </div>
        </div>

        <!-- Información del crucero -->
        <div class="row mb-4">
            <div class="col-md-6">
                <h5 class="fw-bold text-secondary">Datos del Crucero</h5>
                <p><strong>#Crucero:</strong> @Model.Id</p>
                <p><strong>Nombre:</strong> @Model.IdcruceroNavigation.Nombre</p>
                <p><strong>Fecha Inicio:</strong> @Model.IdcruceroNavigation.FechaInicio?.ToString("dd/MM/yyyy")</p>
                <p><strong>Cantidad de días:</strong> @Model.IdcruceroNavigation.CantDias</p>
                <p><strong>Fecha Fin:</strong> @(Model.IdcruceroNavigation.FechaInicio.HasValue ?
                    Model.IdcruceroNavigation.FechaInicio.Value.AddDays(Model.IdcruceroNavigation.CantDias).ToString("dd/MM/yyyy") : "N/A")</p>
            </div>
            <div class="col-md-6 text-md-end">
                <h5 class="fw-bold text-secondary">Detalles del Itinerario</h5>
                @foreach (var itinerario in Model.IdcruceroNavigation.Itinerario)
                {
                    <p><strong>Día:</strong> @itinerario.Dia</p>
                    <p><strong>Descripción:</strong> @itinerario.Descripcion</p>
                    <p><strong>Puerto:</strong> @itinerario.IdpuertoNavigation.Nombre</p>
                    <hr class="my-1">
                }
            </div>
        </div>

        <!-- Detalles de la reserva -->
        <table class="table table-bordered text-center">
            <thead class="bg-dark text-white">
                <tr>
                    <th>Pasajeros</th>
                    <th>Camarotes</th>
                    <th>Precio/Camarote</th>
                    <th>Subtotal</th>
                    <th>Impuesto</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>@Model.CantidadDePasajeros</td>
                    <td>@Model.CantidadDeCamarotes</td>
                    <td>$@Model.PrecioTotalCamorotes</td>
                    <td>$@Model.Subtotal</td>
                    <td>$@Model.Impuesto</td>
                    <td class="fw-bold text-success">$@Model.PrecioTotal</td>
                </tr>
            </tbody>
        </table>

        <!-- Botón para imprimir la factura -->
        <div class="text-center mt-4">
            <button class="btn btn-lg btn-primary" onclick="window.print()">
                <i class="bi bi-printer"></i> Imprimir Factura
            </button>
        </div>
    </div>
</div>

<style>
    body {
        background-color: #F8F9FA;
    }

    .invoice {
        max-width: 900px;
        margin: auto;
    }

    .table th, .table td {
        vertical-align: middle;
    }

    .badge {
        font-size: 1rem;
        padding: 0.5rem 1rem;
    }
</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
